<?php
  
    include 'reddit.php';
    include 'youtube.php';
   ?>
<!DOCTYPE html>
<head>
   <title>Mark</title>
   <link rel="stylesheet" href="style.css">
</head>
<body>
   <nav>
      <div class="main">
         <a href="#"></a>
         <a href="#">
            <svg width="23" height="28" viewBox="0 0 23 28" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path d="M0 27.0085V9.54255L11.5 0.80957L23 9.54255V27.0085H14.375V16.82H8.625V27.0085H0Z" "/>
            </svg>
         </a>
         <a href="#">
            <svg width="25" height="25" viewBox="0 0 16 16"   fill="none" xmlns="http://www.w3.org/2000/svg">
               <path d="M11.269 9.40015C11.329 8.89896 11.374 8.39776 11.374 7.88137C11.374 7.36499 11.329 6.86379 11.269 6.36259H13.804C13.924 6.8486 13.999 7.35739 13.999 7.88137C13.999 8.40535 13.924 8.91414 13.804 9.40015M9.94152 13.6224C10.3915 12.7794 10.7365 11.8682 10.9765 10.9189H13.189C12.4624 12.1858 11.3096 13.1455 9.94152 13.6224ZM9.75402 9.40015H6.24402C6.16902 8.89896 6.12402 8.39776 6.12402 7.88137C6.12402 7.36499 6.16902 6.8562 6.24402 6.36259H9.75402C9.82152 6.8562 9.87402 7.36499 9.87402 7.88137C9.87402 8.39776 9.82152 8.89896 9.75402 9.40015ZM7.99902 13.9261C7.37652 13.0148 6.87402 12.0049 6.56652 10.9189H9.43152C9.12402 12.0049 8.62152 13.0148 7.99902 13.9261ZM4.99902 4.84381H2.80902C3.52817 3.57352 4.68012 2.61234 6.04902 2.14039C5.59902 2.98331 5.26152 3.89458 4.99902 4.84381ZM2.80902 10.9189H4.99902C5.26152 11.8682 5.59902 12.7794 6.04902 13.6224C4.68299 13.1452 3.53266 12.1854 2.80902 10.9189ZM2.19402 9.40015C2.07402 8.91414 1.99902 8.40535 1.99902 7.88137C1.99902 7.35739 2.07402 6.8486 2.19402 6.36259H4.72902C4.66902 6.86379 4.62402 7.36499 4.62402 7.88137C4.62402 8.39776 4.66902 8.89896 4.72902 9.40015M7.99902 1.82904C8.62152 2.7403 9.12402 3.75789 9.43152 4.84381H6.56652C6.87402 3.75789 7.37652 2.7403 7.99902 1.82904ZM13.189 4.84381H10.9765C10.7418 3.90328 10.3942 2.99538 9.94152 2.14039C11.3215 2.6188 12.469 3.58323 13.189 4.84381ZM7.99902 0.287476C3.85152 0.287476 0.499023 3.70473 0.499023 7.88137C0.499023 9.8954 1.2892 11.8269 2.69572 13.2511C3.39216 13.9562 4.21896 14.5156 5.1289 14.8972C6.03884 15.2789 7.01411 15.4753 7.99902 15.4753C9.98815 15.4753 11.8958 14.6752 13.3023 13.2511C14.7088 11.8269 15.499 9.8954 15.499 7.88137C15.499 6.88413 15.305 5.89665 14.9281 4.97531C14.5512 4.05398 13.9988 3.21684 13.3023 2.51168C12.6059 1.80652 11.7791 1.24716 10.8691 0.865527C9.95921 0.483898 8.98394 0.287476 7.99902 0.287476Z" />
            </svg>
         </a>
         <div class="btn-div">
            <button class="learn-more" id="add">
               <a class="button" href="#">
                  <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                     <path d="M4.14779 13.5003H5.89779L10.8978 8.47985L9.10612 6.66575L4.14779 11.6862V13.5003ZM11.4811 7.88921L12.3561 6.96107C12.4395 6.87669 12.4811 6.77825 12.4811 6.66575C12.4811 6.55325 12.4395 6.45481 12.3561 6.37043L11.1895 5.18916C11.1061 5.10479 11.0089 5.0626 10.8978 5.0626C10.7867 5.0626 10.6895 5.10479 10.6061 5.18916L9.68945 6.07512L11.4811 7.88921ZM2.48112 16.8753C2.02279 16.8753 1.63029 16.7099 1.30362 16.3792C0.976954 16.0484 0.813899 15.6513 0.814455 15.1878V3.37506C0.814455 2.91099 0.977788 2.51358 1.30445 2.18282C1.63112 1.85207 2.02334 1.68697 2.48112 1.68753H5.98112C6.16168 1.18127 6.4639 0.773452 6.88779 0.464071C7.31168 0.15469 7.78723 0 8.31445 0C8.84223 0 9.31806 0.15469 9.74195 0.464071C10.1658 0.773452 10.4678 1.18127 10.6478 1.68753H14.1478C14.6061 1.68753 14.9986 1.85291 15.3253 2.18367C15.652 2.51442 15.815 2.91156 15.8145 3.37506V15.1878C15.8145 15.6519 15.6511 16.0493 15.3245 16.38C14.9978 16.7108 14.6056 16.8759 14.1478 16.8753H2.48112ZM8.31445 2.74224C8.49501 2.74224 8.64417 2.68233 8.76195 2.56252C8.87973 2.4427 8.9389 2.29167 8.93945 2.10942C8.93945 1.9266 8.88029 1.77557 8.76195 1.65631C8.64362 1.53706 8.49445 1.47715 8.31445 1.47659C8.1339 1.47659 7.98473 1.5365 7.86695 1.65631C7.74918 1.77613 7.69001 1.92716 7.68945 2.10942C7.68945 2.29223 7.74862 2.44327 7.86695 2.56252C7.98529 2.68177 8.13445 2.74168 8.31445 2.74224Z" />
                  </svg>
               </a>
            </button>
         </div>
         <a href="#">
            <svg width="24" height="26" viewBox="0 0 24 26" fill="none" xmlns="http://www.w3.org/2000/svg">
               <path d="M11.7496 0.361572C11.3759 0.361572 11.0022 0.446367 10.7127 0.615956L1.46955 6.02958C0.890471 6.36876 0.890471 6.9051 1.46955 7.24427L10.7127 12.6579C11.2918 12.9971 12.2075 12.9971 12.7865 12.6579L22.0296 7.24427C22.6087 6.90516 22.6087 6.36876 22.0296 6.02964L12.7865 0.616017C12.4969 0.446306 12.1233 0.361572 11.7496 0.361572ZM11.6998 3.6155C12.2452 3.62145 12.7355 3.74797 13.1708 3.99488C13.4685 4.16385 13.6635 4.35654 13.7557 4.57312C13.8448 4.78799 13.8501 5.07123 13.7714 5.4226L13.6746 5.77219C13.6104 6.02235 13.5971 6.20229 13.6347 6.31196C13.6691 6.42004 13.7546 6.5128 13.8913 6.59036L14.0965 6.70665L12.0854 7.84746L11.8619 7.72082C11.6128 7.57953 11.4539 7.41987 11.3849 7.2417C11.3131 7.06188 11.325 6.77588 11.4209 6.38364L11.5131 6.03148C11.5668 5.82176 11.572 5.64978 11.5288 5.51573C11.4893 5.37947 11.3997 5.2717 11.2599 5.19242C11.0472 5.07172 10.7924 5.02846 10.4957 5.06234C10.1958 5.09457 9.88622 5.2013 9.56685 5.38247C9.26599 5.5531 8.99279 5.76674 8.74694 6.02333C8.49812 6.27833 8.28464 6.57008 8.10632 6.89872L6.67525 6.0868C6.99704 5.75963 7.31321 5.47351 7.62381 5.22826C7.93447 4.98319 8.26243 4.76262 8.60782 4.56657C9.51403 4.05253 10.3568 3.7468 11.1359 3.64957C11.3229 3.62523 11.5114 3.61383 11.6999 3.61544L11.6998 3.6155ZM14.7711 7.08939L16.3937 8.00988L14.3826 9.15068L12.76 8.23026L14.7711 7.08939ZM0.852349 8.26977C0.504234 8.26028 0.267578 8.53543 0.267578 9.02214V18.6838C0.267578 19.361 0.725641 20.1642 1.30472 20.5029L10.1955 25.7013C10.7746 26.0399 11.2326 25.7721 11.2326 25.0951V15.4332C11.2326 14.7561 10.7746 13.953 10.1955 13.6143L1.30472 8.4159C1.14195 8.32063 0.988558 8.27333 0.852349 8.26965V8.26977ZM22.6828 8.2699C22.5467 8.27357 22.3934 8.32075 22.2306 8.41602L13.3395 13.6144C12.7604 13.953 12.3023 14.7563 12.3023 15.4335V25.0954C12.3023 25.7724 12.7604 26.04 13.3395 25.7013L22.2306 20.5031C22.8097 20.1645 23.2676 19.3613 23.2676 18.6842V9.02227C23.2676 8.53568 23.031 8.26058 22.6828 8.27002V8.2699ZM3.22604 12.1758C3.62257 12.2595 3.98472 12.362 4.31245 12.483C4.64097 12.6044 4.95844 12.7546 5.26125 12.9318C6.06077 13.3992 6.67029 13.9319 7.08974 14.5298C7.5092 15.124 7.71893 15.7579 7.71893 16.4315C7.71893 16.7771 7.65509 17.0499 7.52723 17.2503C7.39943 17.4471 7.18148 17.6124 6.87348 17.7462L6.55883 17.8638C6.33603 17.9522 6.19014 18.0432 6.12134 18.1371C6.05254 18.2273 6.01817 18.3516 6.01817 18.5103V18.7483L4.24371 17.7109V17.4517C4.24371 17.1625 4.29768 16.9386 4.40587 16.7796C4.514 16.6171 4.74183 16.4647 5.08915 16.3221L5.40381 16.1992C5.5906 16.1251 5.72657 16.0319 5.81177 15.9194C5.90011 15.809 5.94441 15.6726 5.94441 15.5104C5.94441 15.2637 5.86574 15.0255 5.70842 14.796C5.55109 14.563 5.33162 14.3641 5.04976 14.1993C4.7843 14.0441 4.49755 13.9364 4.18949 13.8763C3.88149 13.8125 3.5603 13.7994 3.22604 13.8367V12.1758ZM19.536 12.7032C19.6281 12.7032 19.7134 12.7133 19.7921 12.7334C20.2115 12.8373 20.4212 13.226 20.4212 13.8995C20.4212 14.2451 20.3573 14.5927 20.2295 14.9425C20.1017 15.2887 19.8838 15.7088 19.5758 16.2027L19.2611 16.6882C19.0383 17.0371 18.8924 17.2986 18.8236 17.4728C18.7548 17.6434 18.7205 17.8081 18.7205 17.9668V18.2048L16.946 19.2422V18.9831C16.946 18.6939 17.0001 18.4065 17.1082 18.1212C17.2165 17.8323 17.4441 17.4136 17.7915 16.865L18.1061 16.3742C18.2929 16.0816 18.4289 15.8293 18.5141 15.6173C18.6024 15.4034 18.6467 15.2153 18.6467 15.053C18.6467 14.8063 18.5681 14.6601 18.4108 14.6145C18.2535 14.5655 18.0339 14.6232 17.7521 14.7879C17.4866 14.9431 17.2 15.1708 16.8919 15.4707C16.5839 15.7672 16.2627 16.1295 15.9285 16.5576V14.8966C16.325 14.5168 16.687 14.1957 17.0146 13.9336C17.3424 13.6715 17.6588 13.4514 17.9634 13.2733C18.6132 12.8935 19.1373 12.7034 19.5361 12.7031L19.536 12.7032ZM4.24364 18.4939L6.01817 19.5312V21.4143L4.24371 20.377V18.494L4.24364 18.4939ZM18.7205 18.9877V20.8708L16.946 21.908V20.0251L18.7205 18.9877Z" "/>
            </svg>
         </a>
         <div id="sidebarButton">&#9776; </div>
      </div>
      <div class="actions">
         <img src="Assets/left-arrow.svg">
         <img src="Assets/right-arrow.svg">
         <img src="Assets/refresh.svg">
      </div>
      <div class="search-box">
         <img src="Assets/SearchIcon.png">
         <input type="text" id="searchInput"  placeholder="Search">
      </div>
      <div class="apps">
      <img src="Assets/Twitter.svg">
         <img src="Assets/Youtube.svg">
         <img src="Assets/insta.svg">
         <img src="Assets/Reddit.svg" id="redditIcon">
         <img src="Assets/Kindle.svg">
         <img src="Assets/pin.svg">
         <img src="Assets/github.svg">
         <img src="Assets/spotify.svg">
         <!-- <img src="Assets/proton.svg">
         <img src="Assets/Ycomb.svg">
         <img src="Assets/Notion.svg">
         <img src="Assets/arena.svg"> -->

        
      </div>
      <div class="dropdown">
         <img src="Assets/dropdown.svg">
      </div>
      <!-- <div class="user-actions">
         <img src="assets/chat.svg">
         <img src="assets/notifications.svg">
         </div> -->
   </nav>
   <div class="container">
      <div class="sidebar" id="sidebar">
         <div id="sidebar-content">
            <div class="linkbar">
               <img src="Assets/plus.svg">
               <input type="text" placeholder="">
            </div>
            <div class="formats">
               <img src="Assets/Articles.svg" >
               <img src="Assets/Papers.svg" >
               <img src="Assets/Audio.svg" >
               <img src="Assets/Zettlekasten.svg" ><br>
               <img src="Assets/Xfile.svg" >
               <img src="Assets/Books.svg" >
               <img src="Assets/Video.svg" >
               <img src="Assets/Pictures.svg" >
            </div>
            <div class="to-do">
               <input type="checkbox" id="notes" name="notes" value="notes"><label for="notes"> Notes</label><br><br>
               <input type="checkbox" id="" name="" value=""> Universal Highlight Taker Offline (App) & Onlline (Extension) </label><br><br>
               <input type="checkbox" id="" name="" value=""><label for="`"> Fetch 5:Twitter, Insta, YT, Reddit, Kindle</label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Content Population </label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Sorting By Apps </label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Sorting By Formats</label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Search</label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Auth</label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Social(Follow, unfollow, DMs, Public Bookmarks, Browsing History)</label><br><br>
               <input type="checkbox" id="" name="" value=""><label for=""> Database</label><br><br>
            </div>
            <!-- <div class="card">
               <div class="player">
                   <img src="assets/previous.svg" >
                   <img src="assets/pause.svg" >
                   <img src="assets/next.svg" >
                   <img src="assets/volume.svg" >
               </div>
               </div> -->
         </div>
      </div>
      <div class="content">
      <div class="main-content">

         <div class="reddit">
      <?php
    // Display each saved post
    foreach ($savedData['data']['children'] as $post) {
        echo '<div class="post-card">';
        
        // Check if the 'subreddit' key exists before using it
        if (isset($post['data']['subreddit'])) {
            echo '<div class="post-subreddit">r/' . htmlspecialchars($post['data']['subreddit']) . '</div>';
        }
        
        // Display the author
        if (isset($post['data']['author'])) {
            echo '<div class="post-author">Posted by u/' . htmlspecialchars($post['data']['author']) . '</div>';
        }

        // Display the post time
        if (isset($post['data']['created_utc'])) {
            $postDate = new DateTime('@' . $post['data']['created_utc']); // '@' because it's a UNIX timestamp
            $postDate->setTimezone(new DateTimeZone('UTC')); // Adjust the timezone as needed
            echo '<div class="post-time">Posted on ' . $postDate->format('Y-m-d H:i:s') . ' UTC</div>';
        }
        
        // Check if the 'title' key exists before using it
        if (isset($post['data']['title'])) {
            // Check if the 'url' key exists before using it in the anchor
            $url = isset($post['data']['url']) ? htmlspecialchars($post['data']['url']) : '#';
            echo '<div class="post-title"><a href="' . $url . '">' . htmlspecialchars($post['data']['title']) . '</a></div>';
        }

        // Display the number of comments
        if (isset($post['data']['num_comments'])) {
            echo '<div class="post-comments">Comments: ' . intval($post['data']['num_comments']) . '</div>';
        }

        // Display the share link (you can adjust this to be more sophisticated if you like)
        if (isset($post['data']['permalink'])) {
            echo '<div class="post-share"><a href="https://reddit.com' . htmlspecialchars($post['data']['permalink']) . '">Share</a></div>';
        }
        
        // Check if the 'post_hint' key exists and equals 'image' before trying to access the 'url' key
        if (isset($post['data']['post_hint']) && $post['data']['post_hint'] === 'image' && isset($post['data']['url'])) {
         echo '<img class="post-image" src="' . htmlspecialchars($post['data']['url']) . '" alt="Direct Image Post">';
     } elseif (isset($post['data']['preview']['images'][0]['source']['url']) && (!isset($post['data']['selftext']) || trim($post['data']['selftext']) == "")) {
         $imageUrl = htmlspecialchars($post['data']['preview']['images'][0]['source']['url']);
         echo '<img class="post-image" src="' . $imageUrl . '" alt="Preview Image">';
     } elseif (isset($post['data']['thumbnail']) && $post['data']['thumbnail'] !== 'self' && $post['data']['thumbnail'] !== 'default' && (!isset($post['data']['selftext']) || trim($post['data']['selftext']) == "")) {
         $thumbnailUrl = htmlspecialchars($post['data']['thumbnail']);
         echo '<img class="post-image" src="' . $thumbnailUrl . '" alt="Thumbnail Image">';
     }
     
        echo '</div>'; // Close post-card
    }
?>
</div>



<div class="playlist-container">
<?php
if(isset($playlist_data['items'])) {
    foreach($playlist_data['items'] as $item) {
        $videoId = $item['snippet']['resourceId']['videoId'];
        $video = $videoDetails[$videoId];
        $channelTitle = $video['snippet']['channelTitle'];
        $viewCount = $video['statistics']['viewCount'];
        $publishedAt = $video['snippet']['publishedAt'];
        $timeUploaded = date("F j, Y", strtotime($publishedAt));
        ?>
        
        <div class="video-item">
            <img src="<?php echo $item['snippet']['thumbnails']['medium']['url']; ?>" alt="<?php echo $item['snippet']['title']; ?>" class="video-thumbnail">
            <div class="video-details">
                <h3 class="video-title"><a href="https://www.youtube.com/watch?v=<?php echo $videoId; ?>" target="_blank"><?php echo $item['snippet']['title']; ?></a></h3>
                <div class="video-info">-<b><?php echo $channelTitle; ?></b> on <i><?php echo $timeUploaded; ?></i></div>
                <div class="video-views"><b><?php echo $viewCount; ?></b> views</div>
            </div>
        </div>

        <?php
    }
} else {
    echo "Could not fetch videos!";
}
?>
</div>



</div>



      </div>
   </div>
   <script src="script.js"></script>
</body>
</html>